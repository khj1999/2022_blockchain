<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Simple Asset</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-gH2yIJqKdNHPEq0n4Mqa/HGKIhSkIHeL5AyhkYV8i59U5AR6csBvApHHNl/vI1Bx" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-A3rJD856KowSb7dwlZdYEkO39Gagi7vIsF0jrRAoQmDKKtQBHUuLZ9AsSv4jD4Xa" crossorigin="anonymous"></script>
    <script src = "https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
</head>
<body>
  <div class="container">
    <br>
    <h2>Keytact Query</h2>
    <br>
    <label class="form-label">Trade ID</label>
    <input type="text" id="trade_id" class="form-control"><br>

    <button class="btn btn-outline-danger" id="qr-btn">Query Asset</button>
    &nbsp;
    <a href= "/UI/register.html" class="btn btn-outline-success">Go Register Page</a>
    &nbsp;
    <a href= "/UI/trade.html" class="btn btn-outline-dark">Go Trade Page</a>
    &nbsp;
  </div>
  <!-- <div class="container" id="result"></div> -->
  <div class="container">
      <!--<p id ="result"></p>-->
      <table class="table table-hover">
        <br>
        <tbody id="result" ></tbody>
  </div>
</div>
</body>
<script>
  $("#qr-btn").click(() => {
    const trade_id = $("#trade_id").val();
    console.log(trade_id);
    $("#result").empty();
    $.get("/trade", {trade_id}, (data, status) => {
      console.log(status);
      if(data.result == 'success'){
        alert("success");
      } else {
        alert("fail");
      }
      $("#result").empty();
      $("#result").append('<h4>Query Result<h4>');
      $("#result").append('<tr><td>Result : </td><td>'+ data.result +'</td></tr>');
      $("#result").append('<tr><td>Trade ID  : </td><td>' + data.message.trade_id +'</td></tr>');
      $("#result").append('<tr><td>Product  : </td><td>'+ data.message.product +'</td></tr>');
      $("#result").append('<tr><td>Address  : </td><td>'+ data.message.address+'</td></tr>');
      $("#result").append('<tr><td>Seller Name : </td><td>'+ data.message.seller_name +'</td></tr>');
      $("#result").append('<tr><td>Purchaser Name  : </td><td>'+ data.message.purchaser_name +'</td></tr>');
      $("#result").append('<tr><td>Status  : </td><td>'+ data.message.status +'</td></tr>');
    })
  })
</script>
</html>

<!--
  1. 쿼리 html에서 자산이력조회 버튼 추가(수정), 결과테이블 영역 추간
  2. 이력조회버튼 자바스크립트 추가
  3. 서버라우팅 추가 - /asset/history
-->
<!-- 작성자 : khj -->
<!--
   <p>If you click the "Submit" button, the form-data will be sent to a page called "/action_page.php".</p>
    localhost
    http://localhost:3000/public/query.html

-->