<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Application Trade</title>
    
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-gH2yIJqKdNHPEq0n4Mqa/HGKIhSkIHeL5AyhkYV8i59U5AR6csBvApHHNl/vI1Bx" crossorigin="anonymous">
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-A3rJD856KowSb7dwlZdYEkO39Gagi7vIsF0jrRAoQmDKKtQBHUuLZ9AsSv4jD4Xa" crossorigin="anonymous"></script>
         <!-- 제이쿼리 라이브러리-->
         <script src = "https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
      </body>
    </head>
<body>
    <div class ="container">
    <br>
    <h2>Application Trade Forms</h2>
        <br>
        <!-- label id, input-->
            
        <label class="form-label">Trade ID</label>
        <input type="text" class="form-control" id="trade_id" />
        <br />

        <label class ="form-label">Product</label>
        <input type="text" class="form-control" id="product" />
        <br />

        <!-- label pw, input -->
        <label class="form-label">Address</label>
        <input type="text" class="form-control" id="address" />
        <br />

        <label class ="form-label">Purchaser Name</label>
        <input type="text" class="form-control" id="purchaser_name" />
        <br />
        <!-- gen cert -->
        <button class="btn btn-outline-danger" id="cr-btn">Application</button>
        &nbsp;
        <a href= "/UI/check.html" class="btn btn-outline-success">Go Check Page</a>
        &nbsp;
        <a href= "/UI/register.html" class="btn btn-outline-dark">Go Register Page</a>

    <!-- </form> -->
    </div>
    <div>
        <!--<div class = "container">
            <p id="result"></p>
        </div>
    -->
    <div class="container">
        <!--<p id ="result"></p>-->
        <table class="table table-hover">
          <br>
          <tbody id="result" ></tbody>
      </table>
    </div>
</body>

<script>
    $("#cr-btn").click(() => {
        const trade_id = $("#trade_id").val();
        const product = $("#product").val();
        const address = $("#address").val();
        const purchaser_name = $("#purchaser_name").val();
        console.log(trade_id,product,address,purchaser_name);

        $.post("/trade/tx", {trade_id, product, address, purchaser_name}, (data, status) => {
            console.log(status);
            if(data.result == 'success'){
                alert("success");
            } else {
                alert("fail");
            }
            $("#result").empty();
            $("#result").append('<h4>Application Result<h4>');
            $("#result").append('<tr><td>Result : </td><td>'+ data.result +'</td></tr>');
            $("#result").append('<tr><td>Message    : </td><td>' + data.message +'</td></tr>');
        });
    });
</script>
</html>